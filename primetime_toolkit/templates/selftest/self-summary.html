{% extends 'layout.html' %}

{% block content %}
<div class="summary-page" style="background: var(--page-bg);">
  <div class="container-summary" style="display: flex; gap: 28px; align-items: flex-start; justify-content: flex-start;">
    <div class="main-col" style="flex:1"><br><br>
      <h1
      class="display-1 section-title mb-2"
      style="font-size: 3rem; font-weight: 800; text-align: center; letter-spacing: -0.6px; margin-top:-10px;"
    >
      Your Self-Assessment Summary
    </h1>

      <!-- Overall result card-->
      <section id="overview" class="card" style="text-align:center; margin:40px 0;">
        <h2 class="section-title" style="color: var(--muted); margin-bottom:12px; font-size:20px; font-weight:400;">
          Your Prime Time Readiness Type is:
        </h2>
        {% if result_message == "Proactive" %}
          <h1 style="font-size:48px;color:#0062b1;margin:0">Proactive</h1>
          <p class="meta" style="max-width:700px;margin:16px auto 0">
            You’ve demonstrated a high level of financial awareness and proactive planning. Whether it’s managing your spending, saving regularly, understanding your super, or protecting your future. your habits show consistency and confidence. You are likely someone who takes initiative, seeks out resources, and follows through with actions that align with your long-term goals. While there may still be areas to refine, you’re in a strong position to maintain momentum and build wealth with intention. Keep leveraging your strengths and explore advanced strategies like investment planning, mentoring others, or fine-tuning your retirement vision.
          </p>
        {% elif result_message == "Reactive" %}
          <h1 style="font-size:48px;color:#994505;margin:0">Reactive</h1>
          <p class="meta" style="max-width:700px;margin:16px auto 0">
            You’ve started your financial journey with some strong habits in place. Perhaps you’re budgeting, saving, or beginning to understand your superannuation, but your planning may still be inconsistent or reactive rather than intentional. You might rely on short-term fixes or find it hard to follow through on your plans. That’s okay you’re not starting from scratch. The next step is to focus on clarity, build consistency, and strengthen your financial foundation. With a few practical tools and routines, you can move from reacting to challenges to confidently leading your financial future.
          </p>
        {% else %}
          <h1 style="font-size:48px;color:#8f0b30;margin:0">Inactive</h1>
          <p class="meta" style="max-width:700px;margin:16px auto 0">
            You’re likely just beginning your financial journey or have not yet built strong habits around saving, budgeting, or planning for the future. You may feel uncertain, avoid financial tasks, or lack confidence in money decisions — and that’s okay. Everyone starts somewhere. This is your opportunity to take small, manageable steps: track your spending, build a basic emergency fund, or explore how superannuation works. Remember, progress is not about perfection. it’s about building one positive habit at a time. With the right support, you can gain control and start moving toward financial independence.
          </p>
        {% endif %}
        <p class="muted" style="margin-top:10px">Total Score: <strong>{{ total_score }}</strong> / 100</p>
      </section>

      <section class="card summary-section" id="score-breakdown">
        <div class="section-title">
          <h3>Category Score Breakdown</h3>
        </div>
        <p class="muted">Here’s how you scored in each area. ⚠ means this area needs focus.</p>
        <table style="width:100%; border-collapse:collapse; margin-top:14px">
          <thead>
            <tr style="border-bottom:1px solid #ddd; text-align:left">
              <th style="padding:8px">Category</th>
              <th style="padding:8px">Score</th>
              <th style="padding:8px">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for label, key in [
              ("Purpose & Direction", "purpose"),
              ("Spending & Cashflow", "spending"),
              ("Saving & Emergency", "saving"),
              ("Debt & Confidence", "debt"),
              ("Superannuation", "super"),
              ("Protection & Planning", "protection")
            ] %}
              {% set score = category_scores[key]|default(0) %}
              <tr style="border-bottom:1px solid #eee">
                <td style="padding:8px">{{ label }}</td>
                <td style="padding:8px">{{ score }}%</td>
                <td style="padding:8px">
                  {% if score < 8 %}
                    ⚠ Needs Focus
                  {% elif score < 15 %}
                     Moderate
                  {% else %}
                    Strong
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
      <div style="height:40px;"></div>
      <section class="card summary-section" id="gaps">
        <div class="section-title">
          <h3>Areas to improve</h3>
        </div>
        <p class="muted">We recommend focusing on the categories below — these scored <strong>below 50%</strong> and may have the biggest impact on your retirement confidence.</p>
        {% set gaps = [] %}
        {% for label, key in [
          ("Purpose & Direction","purpose"),
          ("Spending & Cashflow","spending"),
          ("Saving & Emergency","saving"),
          ("Superannuation","super"),
          ("Protection","protection"),
          ("Planning Confidence","confidence")
        ] %}
          {% set score = category_scores[key]|default(0) %}
          {% if score < 50 %}
            {% set _ = gaps.append({'label': label, 'key': key, 'score': score}) %}
          {% endif %}
        {% endfor %}
        {% if not gaps %}
          <p><em>No significant weaknesses detected. Great job!</em></p>
        {% else %}
          {% for g in gaps %}
            {% if g.key == 'purpose' %}
              <p>Purpose & Direction needs attention. It is important to revisit your financial goals and clarify what financial independence means to you. Setting a long-term vision that aligns with your values will help guide your planning and decision-making.</p>
            {% elif g.key == 'spending' %}
              <p>Spending & Cashflow needs attention. Tracking your spending and identifying consistent patterns is essential. Building a realistic budget that prioritises essentials and sets achievable savings goals can help improve financial stability.</p>
            {% elif g.key == 'saving' %}
              <p>Saving & Emergency requires focus. Aim to save at least three months of essential expenses and establish automatic transfers to build consistency. This approach will strengthen your financial resilience in case of emergencies.</p>
            {% elif g.key == 'super' %}
              <p>Superannuation should be reviewed. Checking your account balance, understanding your fees, and considering consolidating multiple super accounts can enhance your retirement savings and reduce unnecessary costs.</p>
            {% elif g.key == 'protection' %}
              <p>Protection is an important area to address. Ensure you have basic insurance coverage and review your estate planning documents, such as a will or power of attorney, to safeguard your financial future and that of your loved ones.</p>
            {% elif g.key == 'confidence' %}
              <p>Planning Confidence can be improved by learning the basics of money management and setting simple weekly financial tasks. Building confidence in your financial decisions will support long-term success.</p>
            {% endif %}
          {% endfor %}
        {% endif %}
      </section>
      <div style="height:40px;"></div>
      <section class="card summary-section" id="next-steps">
        <div class="section-title">
          <h3>Next steps</h3>
        </div>
        <p class="muted">To help you take action, here are three small but meaningful steps you can try over the next 30 days to build financial confidence:</p>
        <ol style="margin-top:12px">
          <li><strong>Define your financial goals</strong> — take time to reflect on what financial independence means to you and write down a clear long-term vision.</li>
          <li><strong>Review your spending patterns</strong> — Even with solid budgeting, reviewing your expenses can reveal new ways to save or invest with purpose.</li>
          <li><strong>Use the Budget Planner tool</strong> — log in to your Dashboard to build a personalised overview of your income and expenses, so you can take more control moving forward.</li>
        </ol>
        <p>To get started, head to your <strong>Dashboard</strong> or <strong>Web Calculator</strong>. You can choose the option that works best for you whether it’s tracking your budget, setting goals, or reviewing your summary. Both tools support your Prime Time journey in different ways, and you can switch between them anytime.</p>
        <div class="cta-row text-center my-5">
          <a href="{{ url_for('views.dashboard_spreadsheet') }}" class="btn btn-start px-5 py-3 rounded-pill">
            Go Dashboard
          </a> 
          <a href="{{ url_for('views.dashboard_web_calculator') }}" class="btn btn-start px-5 py-3 rounded-pill">
            Go Web Calculator
          </a>
        </div>
      </section>
    </div>
  </div>
  <br><br>
</div>


<!--sidebar active link tracking -->
<script>
  (function(){
    const navLinks = document.querySelectorAll('#page-nav a');
    const sections = Array.from(navLinks).map(a => document.querySelector(a.getAttribute('href')));
    function onScroll(){
      const offset = window.scrollY + 140;
      sections.forEach((sec, i) => {
        if(!sec) return;
        const top = sec.offsetTop;
        const bottom = top + sec.offsetHeight;
        if(offset >= top && offset < bottom){
          navLinks.forEach(n => n.classList.remove('active'));
          navLinks[i].classList.add('active');
        }
      });
    }
    window.addEventListener('scroll', onScroll);
    setTimeout(onScroll,200);
    navLinks.forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        const target = document.querySelector(a.getAttribute('href'));
        if(target) window.scrollTo({top: target.offsetTop - 80, behavior: 'smooth'});
      });
    });
  })();
</script>
{% endblock %}